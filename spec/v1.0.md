# OpenAIX Protocol Specification v1.0

## 文档信息

- **版本**: v1.0.0
- **状态**: Release
- **发布日期**: 2025-02-13
- **维护者**: OpenAIX Team

---

## 1. 概述

### 1.1 目标

本文档定义 OpenAIX（AI Experience）评分协议的标准，用于量化网站对 AI Agent（LLM、RAG系统、爬虫）的友好程度。

### 1.2 范围

本规范涵盖：
- 四大评分维度的定义和计算方法
- 评分等级（Class S/A/B/C）的划分标准
- 开发者优化指南
- 测试和验证方法

### 1.3 术语定义

| 术语 | 定义 |
|------|------|
| **AIX** | AI Experience，AI体验，衡量网站对AI友好程度的指标 |
| **SNR** | Signal-to-Noise Ratio，信噪比，内容密度指标 |
| **LLM** | Large Language Model，大语言模型 |
| **RAG** | Retrieval-Augmented Generation，检索增强生成 |
| **JSON-LD** | JSON for Linked Data，结构化数据格式 |
| **llms.txt** | AI专用的网站说明文件，类似robots.txt |

---

## 2. 评分体系

### 2.1 总体架构

OpenAIX 评分由四个维度组成，加权计算总分：

```
总分 = SNR × 30% + Semantic × 30% + Token Economy × 20% + Permissions × 20%
```

### 2.2 评分等级

| 等级 | 分数范围 | 描述 | 建议 |
|------|----------|------|------|
| **S** | 85-100 | Silicon Native | AI体验优秀，完全适配智能体访问 |
| **A** | 70-84 | Agent Friendly | AI体验良好，结构清晰，低噪音 |
| **B** | 50-69 | Acceptable | 可接受，基本可用但有改进空间 |
| **C** | < 50 | Needs Improvement | 需改进，存在明显AI访问障碍 |

---

## 3. 维度一：SNR（信噪比）

### 3.1 定义

SNR 衡量 HTML 中有效内容占总内容的比例。

```
SNR = (Clean Tokens / Raw Tokens) × 100%
```

- **Raw Tokens**: 原始 HTML 的 Token 数量
- **Clean Tokens**: 移除脚本、样式后，转换为 Markdown 的 Token 数量

### 3.2 评分标准

| SNR 范围 | 得分 | 评级 |
|----------|------|------|
| ≥ 40% | 100 | 优秀 |
| 20% - 40% | 70-100 | 良好（线性插值） |
| 10% - 20% | 50-70 | 可接受（线性插值） |
| 5% - 10% | 30-50 | 需改进（线性插值） |
| < 5% | 0-30 | 差（线性插值） |

### 3.3 计算方法

1. 使用 `tiktoken` (cl100k_base) 计算 Raw Tokens
2. 使用 BeautifulSoup 移除以下标签：
   - script, style, noscript
   - iframe, canvas, svg
   - template, embed, object
3. 使用 markdownify 转换为 Markdown
4. 重新计算 Clean Tokens

### 3.4 优化建议

- 减少不必要的 HTML 包装层级
- 移除未使用的 CSS/JS
- 避免内联样式和脚本

---

## 4. 维度二：Semantic Structure（语义结构）

### 4.1 定义

评估 HTML 的语义化程度，包括标签使用、结构化数据和元数据质量。

### 4.2 评分构成

总分 = 语义标签(25) + 标题层级(25) + JSON-LD(25) + 图片可访问(10) + 元数据(15)

#### 4.2.1 语义标签 (25分)

支持的语义标签：article, nav, header, main, section, aside, footer

```
得分 = (使用的标签数 / 7) × 25
```

#### 4.2.2 标题层级 (25分)

- H1 存在：+15分
- 2级或以上标题：+10分

#### 4.2.3 JSON-LD 结构化数据 (25分)

评分标准：
- @context 存在：+5分
- @type 存在：+5分
- name/description/url 至少一个：+5分
- 内容长度 > 500字符：+10分

#### 4.2.4 图片可访问性 (10分)

```
得分 = (有 alt 属性的图片数 / 总图片数) × 10
```

#### 4.2.5 元数据质量 (15分)

- title 标签存在：+8分
- meta description 存在：+7分

### 4.3 Hidden Gem 规则

对于视觉丰富但结构化数据完善的网站（如 Apple、Shopify），如果满足：
- 文本密度 < 0.15
- JSON-LD 得分 ≥ 15
- 有 H1 标签
- SNR < 40%

则该维度最低得分为 85 分。

---

## 5. 维度三：Token Economy（Token 经济）

### 5.1 定义

评估 AI 阅读页面的成本效率。

### 5.2 评分标准

基于 Clean Tokens 数量：

| Token 数 | 成本评级 | 得分 |
|----------|----------|------|
| < 2,000 | Low | 100 |
| 2,000 - 6,000 | Medium | 85 |
| 6,000 - 15,000 | High | 65 |
| > 15,000 | Very High | 40 |

### 5.3 成本估算

```
Estimated Cost (USD) = (Clean Tokens / 1000) × $0.03
```

基于 GPT-4 定价模型。

---

## 6. 维度四：Agent Permissions（智能体权限）

### 6.1 定义

评估网站对 AI Agent 的可访问性和友好程度。

### 6.2 评分构成

起始分：100分

#### 6.2.1 Robots.txt 检查 (-10分/Agent)

检查的 AI Agent 列表：
- GPTBot
- CCBot
- anthropic-ai
- ClaudeBot
- ChatGPT-User
- Google-Extended
- PerplexityBot

每个被 Disallow 的 Agent 扣 10 分。

#### 6.2.2 响应时间 (-5到-10分)

- > 3秒：-10分
- 1.5秒 - 3秒：-5分

#### 6.2.3 llms.txt 奖励 (+80分保底)

如果检测到 `/llms.txt` 或 `/.well-known/llms.txt`，该维度得分不低于 80。

### 6.3 llms.txt 规范

#### 6.3.1 文件位置

- 根目录：`/llms.txt`
- 备选：`/.well-known/llms.txt`

#### 6.3.2 格式示例

```
# OpenAIX Site Description

## Overview
This website provides [description].

## Key Sections
- /docs: API documentation
- /blog: Technical articles
- /products: Product catalog

## Access Rules
- Allow: All AI agents
- Rate limit: 1 request per second

## Contact
For questions: ai-access@example.com
```

---

## 7. 测试与验证

### 7.1 本地测试

```bash
# 安装
pip install -e .

# 测试单个 URL
python -m openaix https://example.com

# 批量测试
python benchmark.py --urls-file urls.txt
```

### 7.2 CI/CD 集成

```yaml
# .github/workflows/aix-check.yml
name: AIX Score Check
on: [push]

jobs:
  check:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Install OpenAIX
        run: pip install openaix-scorer
      - name: Check Score
        run: |
          python -c "
          from openaix import OpenAIXScorer
          scorer = OpenAIXScorer()
          result = scorer.score('https://your-site.com')
          assert result['score'] >= 70, f'Score too low: {result[\"score\"]}'
          print(f'✅ AIX Score: {result[\"score\"]}')
          "
```

---

## 8. 版本历史

| 版本 | 日期 | 变更 |
|------|------|------|
| v1.0.0 | 2025-02-13 | 初始发布，重构自 v0.x |

---

## 9. 参考资料

- [llms.txt Specification](https://llmstxt.org/)
- [Schema.org](https://schema.org/)
- [Robots Exclusion Protocol](https://www.rfc-editor.org/rfc/rfc9309.html)

---

## 10. 贡献

本规范是开源的，欢迎通过 GitHub Issues 和 Pull Requests 参与改进。

**GitHub**: https://github.com/OpenAIX-orgnization/openaix-core
